function getLocalLANIP() {
  return new Promise((resolve, reject) => {
    // WebRTC method to get local IP
    window.RTCPeerConnection = 
      window.RTCPeerConnection || 
      window.mozRTCPeerConnection || 
      window.webkitRTCPeerConnection;

    if (!window.RTCPeerConnection) {
      reject('WebRTC not supported');
      return;
    }

    const pc = new RTCPeerConnection({
      iceServers: []
    });

    pc.createDataChannel("");
    
    pc.onicecandidate = (e) => {
      if (!e.candidate) return;
      
      const candidate = e.candidate.candidate;
      const matchIPv4 = candidate.match(/(\d+\.\d+\.\d+\.\d+)/);
      
      if (matchIPv4) {
        const localIP = matchIPv4[1];
        pc.close();
        resolve(localIP);
      }
    };

    pc.createOffer()
      .then(offer => pc.setLocalDescription(offer))
      .catch(err => reject(err));
  });
}

$.getJSON("https://api.ipify.org/?format=json", function(e) {
        $('.ip').text(e.ip);
      });
